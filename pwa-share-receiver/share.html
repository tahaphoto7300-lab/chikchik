<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Shared File</title>
</head>
<body>
  <h1>Shared File Received</h1>
  <div id="output">Waiting for shared data...</div>

  <script>
    // Parse form data from POST
    async function parseFormData() {
      if (!('launchQueue' in window)) return;

      launchQueue.setConsumer(async (launchParams) => {
        if (!launchParams.files.length) return;

        const fileHandle = launchParams.files[0];
        const file = await fileHandle.getFile();

        const output = document.getElementById('output');
        output.innerHTML = `
          <p><strong>Name:</strong> ${file.name}</p>
          <p><strong>Type:</strong> ${file.type}</p>
          <p><strong>Size:</strong> ${file.size} bytes</p>
        `;

        if (file.type.startsWith('image/')) {
          const img = document.createElement('img');
          img.src = URL.createObjectURL(file);
          img.style.maxWidth = '100%';
          output.appendChild(img);
        }
      });
    }

    parseFormData();
  </script>
</body>
</html>
